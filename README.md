# ğŸƒğŸ»â€â™‚ğŸƒğŸ»FitFinder - ì„±ë³„, ì—°ë ¹, ìœ„ì¹˜, ì„ í˜¸ ì¢…ëª©ì„ ë¶„ì„í•˜ì—¬ ìµœì ì˜ ìš´ë™ ì¥ì†Œì™€ ë§ì¶¤í˜• ì£¼ê°„ ë£¨í‹´ì„ ì¶”ì²œí•´ì£¼ëŠ” ìŠ¤í¬ì¸  íë ˆì´ì…˜ ì„œë¹„ìŠ¤

## 1. ì„œë¹„ìŠ¤ ì†Œê°œ

FitFinderëŠ” êµ­ë¯¼ì²´ìœ¡ì§„í¥ê³µë‹¨(KSPO)ì˜ ê³µê³µ ì²´ìœ¡Â·ìƒí™œ ìŠ¤í¬ì¸  ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ,
ì‚¬ìš©ìì˜ ì„±ë³„, ì—°ë ¹, ìœ„ì¹˜, ê´€ì‹¬ ì¢…ëª©, ìš´ë™ ê°€ëŠ¥ ì‹œê°„ëŒ€ë¥¼ ë°˜ì˜í•´ ê°€ì¥ ì í•©í•œ ìš´ë™ í”„ë¡œê·¸ë¨ì„ ì¶”ì²œí•´ ì£¼ëŠ” ë§ì¶¤í˜• ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

ì‚¬ìš©ìëŠ” ë³µì¡í•˜ê²Œ ê²€ìƒ‰í•  í•„ìš” ì—†ì´, ìì‹ ì˜ ìƒí™œ íŒ¨í„´ì— ë§ëŠ” ê·¼ì²˜ ìš´ë™ í”„ë¡œê·¸ë¨ê³¼ ì‹œì„¤ì„ ì‰½ê²Œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë” ë‚˜ì•„ê°€ FitFinderëŠ” ê°œì¸ ì¡°ê±´ê³¼ ì£¼ë³€ í™˜ê²½ì„ í•¨ê»˜ ê³ ë ¤í•´ ì¼ì£¼ì¼ ìš´ë™ ë£¨í‹´ê¹Œì§€ ìë™ìœ¼ë¡œ êµ¬ì„±í•´ ì£¼ì–´,
ìš´ë™ ê³„íš ì„¸ìš°ëŠ” ë¶€ë‹´ì„ ëœì–´ì¤ë‹ˆë‹¤.

FitFinderëŠ” ê³µê³µ ë°ì´í„°ë¥¼ í™œìš©í•´ ëˆ„êµ¬ë‚˜ ìì—°ìŠ¤ëŸ½ê²Œ ìš´ë™ì„ ì‹œì‘í•˜ê³  ê¾¸ì¤€íˆ ìœ ì§€í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ ë§Œë“œëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.

## 2. ë°±ì—”ë“œ íŒ€ì› êµ¬ì„±

<div align = "center">

|                                                              **ê¹€ìš©ë²”**                                                               |                                                              **ì†Œíƒœí˜¸**                                                               |                                                                **ë‚˜ìœ¤ë¹ˆ**                                                                |                                                              **ë°•ì‹¬ì¸**                                                              |
|:----------------------------------------------------------------------------------------------------------------------------------:|:----------------------------------------------------------------------------------------------------------------------------------:|:-------------------------------------------------------------------------------------------------------------------------------------:|:---------------------------------------------------------------------------------------------------------------------------------:|
| [<img src="https://avatars.githubusercontent.com/u/88239689?v=4" height=150 width=150> <br/> @Bumnote](https://github.com/Bumnote) | [<img src="https://avatars.githubusercontent.com/u/91146046?v=4" height=150 width=150> <br/> @SoTaeHo](https://github.com/SoTaeHo) | [<img src="https://avatars.githubusercontent.com/u/129844297?v=4" height=150 width=150> <br/> @skdbsqls](https://github.com/skdbsqls) | [<img src="https://avatars.githubusercontent.com/u/127483416?v=4" height=150 width=150> <br/> @IMCTZN](https://github.com/IMCTZN) |
|                                                            Backend, AI                                                             |                                                                 AI                                                                 |                                                               Frontend                                                                |                                                               Data                                                                |

</div>

## 3. ê°œë°œ í™˜ê²½

| í•­ëª©         | ë²„ì „/ì„¤ì •                                      |
  |------------|--------------------------------------------|
| Framework  | Spring Boot 3.5.8                          |
| JDK        | Temurin 21                                 |
| AI         | Spring AI 1.1.0                            |
| Build Tool | Gradle 9.2.1                               |
| Database   | PostgreSQL 15                              |
| ê¸°íƒ€         | Docker 24+, Docker Compose, GitHub Actions |

### ì‹¤í–‰ í”„ë¡œí•„

- `local`: ë¡œì»¬ ê°œë°œìš©, `.env`ì™€ `application-secret.yml`ì„ í†µí•´ DB/OpenAI í‚¤ ì£¼ì…
- `prod`: Docker Compose ë° EC2 ë°°í¬ì—ì„œ ì‚¬ìš©, `.env`ì™€ Secretsë¡œ í™˜ê²½ ë¶„ë¦¬

## 4. ì•„í‚¤í…ì²˜ êµ¬ì¡°
![architecture](img/architecture.png)

## 5. ì±„íƒí•œ ê°œë°œ ê¸°ìˆ 

- **Spring Web + Validation**: REST API, DTO ê²€ì¦
- **Spring Data JPA + Querydsl 5**: ë™ì  ì¡°ê±´ ê²€ìƒ‰(`ProgramRepositoryImpl`)ê³¼ Slice + ì»¤ì„œ ê¸°ë°˜ ë¬´í•œ ìŠ¤í¬ë¡¤ í˜ì´ì§•
- **Spring AI 1.1**: `ChatClient`ë¡œ OpenAI Chat Completions í˜¸ì¶œ, Prompt í™œìš©í•œ JSON ì‘ë‹µ íŒŒì‹±
- **Swagger(springdoc-openapi 2.8.6)**: ì„œë¹„ìŠ¤ ë¡œì§ì˜ ì˜¤ì—¼ì„ ì—†ì• ê¸° ìœ„í•œ Swagger ì „ìš© ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“¤ì–´ API ëª…ì„¸ ìë™í™”
- **Global Exception Handling**: `GlobalExceptionHandler`ë¥¼ í†µí•œ `CustomException` ì»¤ìŠ¤í…€ ì˜ˆì™¸ ë° `ApiResponse` ê³µí†µ ì‘ë‹µ
- **Docker & Docker Compose**: `spots-app`, `postgres`, `nginx`, `certbot` ìŠ¤íƒ ìš´ì˜
- **CI/CD**: GitHub Actions `CI.yml` ë¹Œë“œ & ë„ì»¤ í‘¸ì‹œ, `CD.yml` EC2 ìë™ ë°°í¬
- **Infra Scripts**: `scripts/deploy.sh`ë¡œ SSL ë°œê¸‰/ê°±ì‹  + ì„œë¹„ìŠ¤ ë¡¤ë§

## 6. í”„ë¡œì íŠ¸ êµ¬ì¡°

```
spots/
â”œâ”€â”€ build.gradle / settings.gradle
â”œâ”€â”€ docker-compose.yml          # app + db + nginx + certbot
â”œâ”€â”€ Dockerfile / Dockerfile.local
â”œâ”€â”€ scripts/deploy.sh
â”œâ”€â”€ nginx/
â”‚   â”œâ”€â”€ nginx-prod.conf         # ìš´ì˜ reverse proxy
â”‚   â””â”€â”€ nginx-cert-setup.conf   # Certbot ì„ì‹œ ì„¤ì •
â”œâ”€â”€ src/
â”‚   â””â”€â”€ main/
â”‚       â”œâ”€â”€ java/com/spots/
â”‚       â”‚   â”œâ”€â”€ SpotsApplication.java
â”‚       â”‚   â”œâ”€â”€ domain/
â”‚       â”‚   â”‚   â”œâ”€â”€ program/    # controller/service/repository/entity/dto
â”‚       â”‚   â”‚   â”œâ”€â”€ facility/
â”‚       â”‚   â”‚   â”œâ”€â”€ transport/
â”‚       â”‚   â”‚   â”œâ”€â”€ ai/
â”‚       â”‚   â”‚   â””â”€â”€ category/
â”‚       â”‚   â”œâ”€â”€ global/         # config, exception, swagger
â”‚       â”‚   â””â”€â”€ swagger/
â”‚       â””â”€â”€ resources/
â”‚           â”œâ”€â”€ application*.yml
â”‚           â””â”€â”€ prompt/routine.prompt
â””â”€â”€ .github/workflows/CI.yml, CD.yml
```

## 7. ê°œë°œí•œ ê¸°ëŠ¥ ì„¤ëª…

1. **í”„ë¡œê·¸ë¨ ì¡°ê±´ ê²€ìƒ‰ API (`ProgramController#searchPrograms`)**
    - ì…ë ¥: ì„±ë³„, ì—°ë ¹, ì¢Œí‘œ, ì„ í˜¸ ì¢…ëª©, ìš”ì¼, ì‹œê°„, í˜ì´ì§€ íŒŒë¼ë¯¸í„°.
    - Querydslì—ì„œ ê±°ë¦¬ í•„í„°(Haversine)Â·ì¹´í…Œê³ ë¦¬Â·ìš”ì¼Â·ì‹œê°„ í•„í„°ë¥¼ ëª¨ë‘ ì¡°í•©í•´ Slice ì‘ë‹µì„ ë°˜í™˜í•©ë‹ˆë‹¤.
2. **í”„ë¡œê·¸ë¨ ìƒì„¸ ì¡°íšŒ (`ProgramService#getProgram`)**
    - Program + Facility + Transit ë°ì´í„°ë¥¼ ì§‘ê³„í•´ ì´ë¦„, ëŒ€ìƒ, ìš”ì¼, ê°€ê²©, ì˜ˆì•½ URL, ì‹œì„¤ ì£¼ì†Œ, ëŒ€ì¤‘êµí†µ TOP2ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
3. **ì‹œì„¤/êµí†µ ë°ì´í„° ì²˜ë¦¬**
    - `Facility`, `FacilityTransit` ì—”í‹°í‹° ë° `TransitRepository` Native Queryë¡œ ë­í¬ ê¸°ì¤€ ìƒìœ„ 2ê°œ ì´ë™ ìˆ˜ë‹¨ì„ ë„ë³´ ë¶„ ë‹¨ìœ„ë¡œ ê³„ì‚°í•©ë‹ˆë‹¤.
4. **AI ê¸°ë°˜ ì£¼ê°„ ë£¨í‹´ ìƒì„± (`RecommendService`, `RecommendLLMService`)**
    - Program ê²€ìƒ‰ ê²°ê³¼ë¥¼ LLM í”„ë¡¬í”„íŠ¸(`routine.prompt`)ì— ì‚½ì…, OpenAI ì‘ë‹µì„ `WeeklyRecommendResponse`ë¡œ ì—­ì§ë ¬í™”í•©ë‹ˆë‹¤.
5. **ê¸€ë¡œë²Œ ì˜ˆì™¸/ê²€ì¦ ì²´ê³„**
    - `@Valid` DTO + `GlobalExceptionHandler` â†’ `ApiResponse` í¬ë§·ìœ¼ë¡œ ì—ëŸ¬ ë©”ì‹œì§€ ì¼ê´€ì„± ìœ ì§€, Swagger ì˜ˆì‹œ ìë™í™”ë¥¼ í†µí•´ API ë¬¸ì„œ ì‹ ë¢°ì„± í™•ë³´í•©ë‹ˆë‹¤.
6. **ìš´ì˜ ìë™í™”**
    - GitHub Actions CIì—ì„œ Gradle clean build ë° Docker Hub Pushë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.
    - CD ì›Œí¬í”Œë¡œìš°ê°€ EC2ë¡œ `deploy.sh`ì™€ ì„¤ì •ì„ ì „ë‹¬í•´ Docker Compose ì¬ê¸°ë™, Certbot ìë™ ê°±ì‹  ë° Nginx ì¬ë¡œë“œê¹Œì§€ ìˆ˜í–‰í•©ë‹ˆë‹¤.

## 8. í™œìš©í•œ ë°ì´í„° ì¶œì²˜

- ë¬¸í™” ë¹…ë°ì´í„°
  í”Œë«í¼: [ê³µê³µì²´ìœ¡ì‹œì„¤ í”„ë¡œê·¸ë¨ ì •ë³´](https://www.bigdata-culture.kr/bigdata/user/data_market/detail.do?id=c3b8fb69-307d-4ae7-ab42-d0314c89ef47)